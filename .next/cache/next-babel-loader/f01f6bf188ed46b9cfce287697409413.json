{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n//import { render, h, Component } from 'preact'\n// var { render, h, Component } = window.preact\nimport React, { Component } from 'react';\nvar h = React.createElement;\nexport var SwiperConfig = {\n  // Behavior\n  // how much of element width to drag to get out\n  outdragFactorLeft: 0.03,\n  outdragFactorRight: 0.03,\n  outdragFactorTop: 0.7,\n  // make veryhard to drag over the top, set to 10+ to make it impossible\n  outdragFactorBottom: 0.3,\n  // Positioning\n  top: 40,\n  // __must__ be in pixels or the math will fail\n  left: 70,\n  width: 200,\n  height: 300,\n  // Card design\n  cardPosition: 'fixed',\n  // can be 'absolute'\n  cardShade: 'rgb(240,243,234)',\n  cardBorderRadius: '3mm',\n  cardBorderLight: '0px solid #998',\n  cardBorderDark: '1.1px solid #662',\n  // Card being swiped (when it moves)\n  cardOpacity: 0.9,\n  swipeShadow: '0px 15px 30px rgba(0,.5,.0,0.5)',\n  // Stack drawing\n  stackBorder: '0.5px dotted #663',\n  stackMax: 8,\n  stackStep: 0.7,\n  stackRotation: 7,\n  stackStepX: 0.9,\n  stackStepY: 1.8,\n  stackShadowColor: 'rgba(.5,.5,.0,0.5)'\n};\nexport function freezeElement(el, freeze) {\n  console.log('>>>>>>>>>>>>>>>>>>>>>>>freezeEl', el);\n\n  if (freeze) {\n    el.style.userSelect = 'none';\n    el.style['-moz-user-select'] = 'none';\n  } else {\n    el.style.userSelect = null;\n    el.style['-moz-user-select'] = null;\n  }\n}\n\nfunction animateElement(el, start) {\n  console.log('>>>>>>>>>>>>>>>>>>>>>>>animEl', el);\n  freezeElement(el, start); // disable the cards content and apply styles effective during animation\n\n  if (start) {\n    el.style.opacity = SwiperConfig.cardOpacity;\n    el.style.boxShadow = SwiperConfig.swipeShadow;\n  } else {\n    el.style.opacity = 1;\n    el.style.boxShadow = null;\n    el.style.transform = null;\n  }\n}\n\nfunction calculateDragout(state) {\n  // returns bitmask: 0: not dragged enough to get out\n  // 1: left, 2: right, 4: up, 8: down, combine like left-up = 1+4 = 5\n  var outdragLeft = SwiperConfig.outdragFactorLeft * state.width;\n  var outdragRight = SwiperConfig.outdragFactorRight * state.width;\n  var outdragTop = SwiperConfig.outdragFactorTop * state.width;\n  var outdragBottom = SwiperConfig.outdragFactorBottom * state.width;\n  var bitmask = 0;\n  if (state.left < state.startX - outdragLeft) bitmask += 1;\n  if (state.left > state.startX + outdragRight) bitmask += 2;\n  if (state.top < state.startY - outdragTop) bitmask += 4;\n  if (state.top > state.startY + outdragBottom) bitmask += 8;\n  return {\n    bitmask: bitmask,\n    outdrag: state.left - state.startX\n  };\n}\n\nexport function DrawStacks(stackSize) {\n  // Draw cards edges that represent the stack under our visible two cards.\n  if (stackSize > SwiperConfig.stackMax) stackSize = SwiperConfig.stackMax;\n\n  function Stack(props) {\n    // draw stack depending on number of cards left\n    var StackStyle = {\n      position: 'absolute',\n      width: SwiperConfig.width,\n      height: SwiperConfig.height,\n      left: SwiperConfig.left + props.i * SwiperConfig.stackStepX,\n      top: SwiperConfig.top + props.i * SwiperConfig.stackStepY,\n      borderRadius: SwiperConfig.cardBorderRadius,\n      backgroundColor: SwiperConfig.cardShade,\n      border: SwiperConfig.stackBorder,\n      zIndex: 1002\n    };\n\n    if (SwiperConfig.stackRotation != undefined) {\n      StackStyle.transform = \"rotate(\".concat(props.i / SwiperConfig.stackRotation, \"deg)\");\n    }\n\n    if (props.last == true && SwiperConfig.stackShadowColor != undefined) {\n      var X = stackSize * SwiperConfig.stackStepX * 1.1;\n      var Y = stackSize * SwiperConfig.stackStepY * 1.1;\n      StackStyle.boxShadow = \"\".concat(X, \"px \").concat(Y, \"px 10px \") + SwiperConfig.stackShadowColor;\n    }\n\n    return h('div', {\n      style: StackStyle\n    });\n  }\n\n  if (stackSize <= 1) return [];\n  var R = [];\n\n  for (var i = stackSize; i >= 0; i -= SwiperConfig.stackStep) {\n    R.push(i);\n  }\n\n  for (var i = 0; i < R.length; i++) {\n    R[i] = h(Stack, {\n      i: R[i],\n      last: i == R.length - 1\n    });\n  }\n\n  return R;\n}\n_c = DrawStacks;\n\nvar TopCard = /*#__PURE__*/function (_Component) {\n  _inherits(TopCard, _Component);\n\n  var _super = _createSuper(TopCard);\n\n  function TopCard(props) {\n    var _this;\n\n    _classCallCheck(this, TopCard);\n\n    _this = _super.call(this, props);\n    _this.touch = _this.touch.bind(_assertThisInitialized(_this));\n    _this.move = _this.move.bind(_assertThisInitialized(_this));\n    _this.release = _this.release.bind(_assertThisInitialized(_this));\n    _this.getCurrentDragout = _this.getCurrentDragout.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TopCard, [{\n    key: \"getCurrentDragout\",\n    value: function getCurrentDragout() {\n      console.log('>>>>>>>>>>>>>getCurrentDragout', this);\n      var top = parseInt(this.node.style.top);\n      var left = parseInt(this.node.style.left);\n      var width = this.base.clientWidth;\n      var height = this.base.clientHeight;\n      var _this$track = this.track,\n          startX = _this$track.startX,\n          startY = _this$track.startY;\n      return calculateDragout({\n        top: top,\n        left: left,\n        width: width,\n        height: height,\n        startX: startX,\n        startY: startY\n      });\n    }\n  }, {\n    key: \"touch\",\n    value: function touch(e) {\n      this.track = {\n        dragout: 0,\n        holdX: e.pageX,\n        holdY: e.pageY,\n        // mark >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n        // startX: parseInt(this.node.style.left),\n        // startY: parseInt(this.node.style.top),\n        startX: parseInt(e.target.style.left),\n        startY: parseInt(e.target.style.top)\n      };\n\n      if (this.userComponent.on_dragbegin) {\n        animateElement(this.node, true);\n        this.userComponent.on_dragbegin();\n      }\n\n      if (this.userComponent.on_dragstate) {\n        this.userComponent.on_dragstate(0, -1);\n      }\n    }\n  }, {\n    key: \"move\",\n    value: function move(e) {\n      // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>..mark\n      // var S = this.node.style\n      var S = e.target.style;\n      console.log('SSSSSSSSSSSSSSSSSSSSSSSSSSsss', S);\n      S.cursor = 'grabbing';\n      S.left = parseInt(S.left) + e.pageX - this.track.holdX + 'px';\n      S.top = parseInt(S.top) + e.pageY - this.track.holdY + 'px';\n      this.track.holdX = e.pageX;\n      this.track.holdY = e.pageY;\n      var calc = this.getCurrentDragout();\n      this.base.style.transform = \"rotate(\".concat(calc.outdrag / 15, \"deg)\");\n      var new_dragout = calc.bitmask;\n\n      if (new_dragout != this.track.dragout) {\n        if (this.props.on_dragstate) {\n          this.props.on_dragstate(new_dragout, this.track.dragout);\n        }\n\n        if (this.userComponent.on_dragstate) {\n          this.userComponent.on_dragstate(new_dragout, this.track.dragout);\n        }\n\n        this.track.dragout = new_dragout;\n      }\n    }\n  }, {\n    key: \"release\",\n    value: function release(el) {\n      console.log('>>>>>>>>>>>>>>this el', el); // animateElement(el, false)\n\n      animateElement(el, false);\n      var S = el.style;\n      S.cursor = 'auto';\n      var dragout = this.getCurrentDragout().bitmask;\n\n      if (dragout == 0) {\n        S.left = this.track.startX;\n        S.top = this.track.startY;\n      } else {\n        this.props.nextcard(dragout);\n      }\n\n      this.track = undefined;\n\n      if (this.userComponent.on_dragend) {\n        this.userComponent.on_dragend(dragout);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var Card = h(this.props.Card, {\n        data: this.props.data,\n        itemData: this.props.itemData,\n        userData: this.props.userData,\n        number: this.props.number,\n        ref: function ref(x) {\n          _this2.userComponent = x;\n        }\n      });\n      return h('div', {\n        onTouchStart: function onTouchStart(e) {\n          _this2.touch(e.touches[0]);\n        },\n        onMouseDown: function onMouseDown(e) {\n          e.preventDefault();\n\n          _this2.touch(e);\n        },\n        onMouseMove: function onMouseMove(e) {\n          if (_this2.track) _this2.move(e);\n        },\n        onTouchMove: function onTouchMove(e) {\n          e.preventDefault();\n          if (_this2.track) _this2.move(e.touches[0]);\n        },\n        onMouseUp: function onMouseUp(e) {\n          if (_this2.track) _this2.release(e.target);\n        },\n        onTouchEnd: function onTouchEnd(e) {\n          if (_this2.track) _this2.release(e.touches[0]);\n        },\n        onMouseLeave: function onMouseLeave(e) {\n          if (_this2.track) _this2.release(e.target);\n        },\n        style: {\n          backgroundImage: \"linear-gradient(290deg, \".concat(SwiperConfig.cardShade, \", white, white)\"),\n          borderRadius: SwiperConfig.cardBorderRadius,\n          borderTop: SwiperConfig.cardBorderLight,\n          borderLeft: SwiperConfig.cardBorderLight,\n          borderRight: SwiperConfig.cardBorderDark,\n          borderBottom: SwiperConfig.cardBorderDark,\n          width: SwiperConfig.width,\n          height: SwiperConfig.height,\n          cursor: 'auto',\n          position: SwiperConfig.cardPosition,\n          top: SwiperConfig.top,\n          left: SwiperConfig.left,\n          zIndex: 1003\n        }\n      }, Card);\n    }\n  }]);\n\n  return TopCard;\n}(Component);\n\nexport var PitchSwiper = /*#__PURE__*/function (_Component2) {\n  _inherits(PitchSwiper, _Component2);\n\n  var _super2 = _createSuper(PitchSwiper);\n\n  function PitchSwiper(props) {\n    var _this3;\n\n    _classCallCheck(this, PitchSwiper);\n\n    _this3 = _super2.call(this, props);\n    _this3.nextcard = _this3.nextcard.bind(_assertThisInitialized(_this3));\n    _this3.state = {\n      current: 0\n    };\n    return _this3;\n  }\n\n  _createClass(PitchSwiper, [{\n    key: \"nextcard\",\n    value: function nextcard(bitmask) {\n      if (this.background.on_card) {\n        this.background.on_card(bitmask, this.state.current, this.props.data[this.state.current], this.props.data);\n      }\n\n      this.setState({\n        current: this.state.current + 1\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var Make = function Make(N) {\n        if (N >= _this4.props.data.length) {\n          return h('div', {}, '');\n        }\n\n        return h(TopCard, {\n          itemData: _this4.props.data[N],\n          data: _this4.props.data,\n          key: N,\n          Card: _this4.props.Card,\n          number: N,\n          on_dragstate: _this4.props.on_dragstate,\n          nextcard: _this4.nextcard,\n          userData: _this4.props.userData\n        });\n      };\n\n      return h('div', {}, Make(this.state.current + 1), Make(this.state.current), h(this.props.Background, {\n        ref: function ref(e) {\n          _this4.background = e;\n        },\n        data: this.props.data,\n        number: this.state.current,\n        itemData: this.props.data[this.state.current],\n        userData: this.props.userData\n      }), DrawStacks(this.props.data.length - this.state.current));\n    }\n  }]);\n\n  return PitchSwiper;\n}(Component);\n\nvar _c;\n\n$RefreshReg$(_c, \"DrawStacks\");","map":{"version":3,"sources":["/home/denis/nextPWA/swip/components/swipper.js"],"names":["React","Component","h","createElement","SwiperConfig","outdragFactorLeft","outdragFactorRight","outdragFactorTop","outdragFactorBottom","top","left","width","height","cardPosition","cardShade","cardBorderRadius","cardBorderLight","cardBorderDark","cardOpacity","swipeShadow","stackBorder","stackMax","stackStep","stackRotation","stackStepX","stackStepY","stackShadowColor","freezeElement","el","freeze","console","log","style","userSelect","animateElement","start","opacity","boxShadow","transform","calculateDragout","state","outdragLeft","outdragRight","outdragTop","outdragBottom","bitmask","startX","startY","outdrag","DrawStacks","stackSize","Stack","props","StackStyle","position","i","borderRadius","backgroundColor","border","zIndex","undefined","last","X","Y","R","push","length","TopCard","touch","bind","move","release","getCurrentDragout","parseInt","node","base","clientWidth","clientHeight","track","e","dragout","holdX","pageX","holdY","pageY","target","userComponent","on_dragbegin","on_dragstate","S","cursor","calc","new_dragout","nextcard","on_dragend","Card","data","itemData","userData","number","ref","x","onTouchStart","touches","onMouseDown","preventDefault","onMouseMove","onTouchMove","onMouseUp","onTouchEnd","onMouseLeave","backgroundImage","borderTop","borderLeft","borderRight","borderBottom","PitchSwiper","current","background","on_card","setState","Make","N","key","Background"],"mappings":"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","sourcesContent":["//import { render, h, Component } from 'preact'\n// var { render, h, Component } = window.preact\n\nimport React, { Component } from 'react'\n\nconst h = React.createElement\n\nexport var SwiperConfig = {\n  // Behavior\n\n  // how much of element width to drag to get out\n  outdragFactorLeft: 0.03,\n  outdragFactorRight: 0.03,\n  outdragFactorTop: 0.7, // make veryhard to drag over the top, set to 10+ to make it impossible\n  outdragFactorBottom: 0.3,\n\n  // Positioning\n  top: 40, // __must__ be in pixels or the math will fail\n  left: 70,\n  width: 200,\n  height: 300,\n\n  // Card design\n  cardPosition: 'fixed', // can be 'absolute'\n  cardShade: 'rgb(240,243,234)',\n  cardBorderRadius: '3mm',\n  cardBorderLight: '0px solid #998',\n  cardBorderDark: '1.1px solid #662',\n\n  // Card being swiped (when it moves)\n  cardOpacity: 0.9,\n  swipeShadow: '0px 15px 30px rgba(0,.5,.0,0.5)',\n\n  // Stack drawing\n  stackBorder: '0.5px dotted #663',\n  stackMax: 8,\n  stackStep: 0.7,\n  stackRotation: 7,\n  stackStepX: 0.9,\n  stackStepY: 1.8,\n  stackShadowColor: 'rgba(.5,.5,.0,0.5)',\n}\n\nexport function freezeElement(el, freeze) {\n  console.log('>>>>>>>>>>>>>>>>>>>>>>>freezeEl', el)\n\n  if (freeze) {\n    el.style.userSelect = 'none'\n    el.style['-moz-user-select'] = 'none'\n  } else {\n    el.style.userSelect = null\n    el.style['-moz-user-select'] = null\n  }\n}\n\nfunction animateElement(el, start) {\n  console.log('>>>>>>>>>>>>>>>>>>>>>>>animEl', el)\n  freezeElement(el, start)\n\n  // disable the cards content and apply styles effective during animation\n  if (start) {\n    el.style.opacity = SwiperConfig.cardOpacity\n    el.style.boxShadow = SwiperConfig.swipeShadow\n  } else {\n    el.style.opacity = 1\n    el.style.boxShadow = null\n    el.style.transform = null\n  }\n}\n\nfunction calculateDragout(state) {\n  // returns bitmask: 0: not dragged enough to get out\n  // 1: left, 2: right, 4: up, 8: down, combine like left-up = 1+4 = 5\n\n  var outdragLeft = SwiperConfig.outdragFactorLeft * state.width\n  var outdragRight = SwiperConfig.outdragFactorRight * state.width\n  var outdragTop = SwiperConfig.outdragFactorTop * state.width\n  var outdragBottom = SwiperConfig.outdragFactorBottom * state.width\n  var bitmask = 0\n  if (state.left < state.startX - outdragLeft) bitmask += 1\n  if (state.left > state.startX + outdragRight) bitmask += 2\n  if (state.top < state.startY - outdragTop) bitmask += 4\n  if (state.top > state.startY + outdragBottom) bitmask += 8\n  return { bitmask, outdrag: state.left - state.startX }\n}\n\nexport function DrawStacks(stackSize) {\n  // Draw cards edges that represent the stack under our visible two cards.\n  if (stackSize > SwiperConfig.stackMax) stackSize = SwiperConfig.stackMax\n\n  function Stack(props) {\n    // draw stack depending on number of cards left\n    var StackStyle = {\n      position: 'absolute',\n      width: SwiperConfig.width,\n      height: SwiperConfig.height,\n      left: SwiperConfig.left + props.i * SwiperConfig.stackStepX,\n      top: SwiperConfig.top + props.i * SwiperConfig.stackStepY,\n      borderRadius: SwiperConfig.cardBorderRadius,\n      backgroundColor: SwiperConfig.cardShade,\n      border: SwiperConfig.stackBorder,\n      zIndex: 1002,\n    }\n\n    if (SwiperConfig.stackRotation != undefined) {\n      StackStyle.transform = `rotate(${\n        props.i / SwiperConfig.stackRotation\n      }deg)`\n    }\n\n    if (props.last == true && SwiperConfig.stackShadowColor != undefined) {\n      var X = stackSize * SwiperConfig.stackStepX * 1.1\n      var Y = stackSize * SwiperConfig.stackStepY * 1.1\n      StackStyle.boxShadow =\n        `${X}px ${Y}px 10px ` + SwiperConfig.stackShadowColor\n    }\n\n    return h('div', { style: StackStyle })\n  }\n\n  if (stackSize <= 1) return []\n  var R = []\n  for (var i = stackSize; i >= 0; i -= SwiperConfig.stackStep) {\n    R.push(i)\n  }\n  for (var i = 0; i < R.length; i++) {\n    R[i] = h(Stack, { i: R[i], last: i == R.length - 1 })\n  }\n\n  return R\n}\n\nclass TopCard extends Component {\n  constructor(props) {\n    super(props)\n    this.touch = this.touch.bind(this)\n    this.move = this.move.bind(this)\n    this.release = this.release.bind(this)\n    this.getCurrentDragout = this.getCurrentDragout.bind(this)\n  }\n\n  getCurrentDragout() {\n    console.log('>>>>>>>>>>>>>getCurrentDragout', this)\n    var top = parseInt(this.node.style.top)\n    var left = parseInt(this.node.style.left)\n    var width = this.base.clientWidth\n    var height = this.base.clientHeight\n    var { startX, startY } = this.track\n\n    return calculateDragout({ top, left, width, height, startX, startY })\n  }\n\n  touch(e) {\n    this.track = {\n      dragout: 0,\n      holdX: e.pageX,\n      holdY: e.pageY,\n\n      // mark >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n      // startX: parseInt(this.node.style.left),\n      // startY: parseInt(this.node.style.top),\n      startX: parseInt(e.target.style.left),\n      startY: parseInt(e.target.style.top),\n    }\n    if (this.userComponent.on_dragbegin) {\n      animateElement(this.node, true)\n      this.userComponent.on_dragbegin()\n    }\n    if (this.userComponent.on_dragstate) {\n      this.userComponent.on_dragstate(0, -1)\n    }\n  }\n\n  move(e) {\n    // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>..mark\n    // var S = this.node.style\n    var S = e.target.style\n    console.log('SSSSSSSSSSSSSSSSSSSSSSSSSSsss', S)\n    S.cursor = 'grabbing'\n    S.left = parseInt(S.left) + e.pageX - this.track.holdX + 'px'\n    S.top = parseInt(S.top) + e.pageY - this.track.holdY + 'px'\n\n    this.track.holdX = e.pageX\n    this.track.holdY = e.pageY\n    var calc = this.getCurrentDragout()\n\n    this.base.style.transform = `rotate(${calc.outdrag / 15}deg)`\n    var new_dragout = calc.bitmask\n    if (new_dragout != this.track.dragout) {\n      if (this.props.on_dragstate) {\n        this.props.on_dragstate(new_dragout, this.track.dragout)\n      }\n      if (this.userComponent.on_dragstate) {\n        this.userComponent.on_dragstate(new_dragout, this.track.dragout)\n      }\n      this.track.dragout = new_dragout\n    }\n  }\n\n  release(el) {\n    console.log('>>>>>>>>>>>>>>this el', el)\n\n    // animateElement(el, false)\n    animateElement(el, false)\n    var S = el.style\n    S.cursor = 'auto'\n    var dragout = this.getCurrentDragout().bitmask\n    if (dragout == 0) {\n      S.left = this.track.startX\n      S.top = this.track.startY\n    } else {\n      this.props.nextcard(dragout)\n    }\n    this.track = undefined\n    if (this.userComponent.on_dragend) {\n      this.userComponent.on_dragend(dragout)\n    }\n  }\n\n  render() {\n    var Card = h(this.props.Card, {\n      data: this.props.data,\n      itemData: this.props.itemData,\n      userData: this.props.userData,\n      number: this.props.number,\n      ref: (x) => {\n        this.userComponent = x\n      },\n    })\n\n    return h(\n      'div',\n      {\n        onTouchStart: (e) => {\n          this.touch(e.touches[0])\n        },\n        onMouseDown: (e) => {\n          e.preventDefault()\n          this.touch(e)\n        },\n        onMouseMove: (e) => {\n          if (this.track) this.move(e)\n        },\n        onTouchMove: (e) => {\n          e.preventDefault()\n          if (this.track) this.move(e.touches[0])\n        },\n        onMouseUp: (e) => {\n          if (this.track) this.release(e.target)\n        },\n        onTouchEnd: (e) => {\n          if (this.track) this.release(e.touches[0])\n        },\n        onMouseLeave: (e) => {\n          if (this.track) this.release(e.target)\n        },\n        style: {\n          backgroundImage: `linear-gradient(290deg, ${SwiperConfig.cardShade}, white, white)`,\n          borderRadius: SwiperConfig.cardBorderRadius,\n          borderTop: SwiperConfig.cardBorderLight,\n          borderLeft: SwiperConfig.cardBorderLight,\n          borderRight: SwiperConfig.cardBorderDark,\n          borderBottom: SwiperConfig.cardBorderDark,\n          width: SwiperConfig.width,\n          height: SwiperConfig.height,\n          cursor: 'auto',\n          position: SwiperConfig.cardPosition,\n          top: SwiperConfig.top,\n          left: SwiperConfig.left,\n          zIndex: 1003,\n        },\n      },\n      Card\n    )\n  }\n}\n\nexport class PitchSwiper extends Component {\n  constructor(props) {\n    super(props)\n    this.nextcard = this.nextcard.bind(this)\n    this.state = {\n      current: 0,\n    }\n  }\n\n  nextcard(bitmask) {\n    if (this.background.on_card) {\n      this.background.on_card(\n        bitmask,\n        this.state.current,\n        this.props.data[this.state.current],\n        this.props.data\n      )\n    }\n    this.setState({ current: this.state.current + 1 })\n  }\n\n  render() {\n    var Make = (N) => {\n      if (N >= this.props.data.length) {\n        return h('div', {}, '')\n      }\n      return h(TopCard, {\n        itemData: this.props.data[N],\n        data: this.props.data,\n        key: N,\n        Card: this.props.Card,\n        number: N,\n        on_dragstate: this.props.on_dragstate,\n        nextcard: this.nextcard,\n        userData: this.props.userData,\n      })\n    }\n\n    return h(\n      'div',\n      {},\n      Make(this.state.current + 1),\n      Make(this.state.current),\n      h(this.props.Background, {\n        ref: (e) => {\n          this.background = e\n        },\n        data: this.props.data,\n        number: this.state.current,\n        itemData: this.props.data[this.state.current],\n        userData: this.props.userData,\n      }),\n      DrawStacks(this.props.data.length - this.state.current)\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}