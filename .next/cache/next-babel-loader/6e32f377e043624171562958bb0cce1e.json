{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n// var { render, h, Component } = window.preact\nimport React, { Component } from 'react';\nvar h = React.createElement;\nimport { SwiperConfig, PitchSwiper, DrawStacks } from '../../components/swipper';\nvar DeskStyle = {\n  zIndex: 1001,\n  position: 'fixed',\n  textAlign: 'center',\n  top: 0,\n  left: 0,\n  width: SwiperConfig.width * 2,\n  height: SwiperConfig.height * 1.5,\n  backgroundImage: 'url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABZJREFUeNpi2r9//38gYGAEESAAEGAAasgJOgzOKCoAAAAASUVORK5CYII=)'\n};\n\nfunction LargeNumber(props) {\n  return h('span', {\n    style: {\n      fontSize: '1cm',\n      color: 'blue'\n    }\n  }, props.number);\n}\n\n_c = LargeNumber;\n\nfunction SmallNumber(props) {\n  return h('span', {\n    style: {\n      fontSize: '0.5cm',\n      color: 'brown'\n    }\n  }, props.number);\n}\n\n_c2 = SmallNumber;\n\nfunction SomeText(props) {\n  return h('span', {\n    style: {\n      fontSize: '0.7cm',\n      color: 'green'\n    }\n  }, props.text);\n}\n\n_c3 = SomeText;\n\nfunction bitmask_as_text(x) {\n  if (x == 0) return 'keep dragging';\n  var s = '';\n  if (x & 1) s += 'left ';\n  if (x & 2) s += 'right ';\n  if (x & 4) s += 'up ';\n  if (x & 8) s += 'down ';\n  return s;\n}\n\nvar SampleCardNumber = /*#__PURE__*/function (_Component) {\n  _inherits(SampleCardNumber, _Component);\n\n  var _super = _createSuper(SampleCardNumber);\n\n  function SampleCardNumber(props) {\n    var _this;\n\n    _classCallCheck(this, SampleCardNumber);\n\n    _this = _super.call(this, props);\n    _this.on_dragstate = _this.on_dragstate.bind(_assertThisInitialized(_this));\n    _this.callApi = _this.callApi.bind(_assertThisInitialized(_this));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(SampleCardNumber, [{\n    key: \"callApi\",\n    value: function callApi() {\n      var _this2 = this;\n\n      this.setState({\n        number: '?',\n        label: 'loading'\n      });\n      setTimeout(function (x) {\n        _this2.setState({\n          number: '<' + _this2.props.number + '>',\n          label: 'still'\n        });\n      }, 500);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.callApi();\n    }\n  }, {\n    key: \"on_dragstate\",\n    value: function on_dragstate(new_dragout) {\n      this.setState({\n        label: bitmask_as_text(new_dragout)\n      });\n    }\n  }, {\n    key: \"on_dragbegin\",\n    value: function on_dragbegin() {}\n  }, {\n    key: \"on_dragend\",\n    value: function on_dragend(dragout) {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h('div', {\n        style: {\n          textAlign: 'center'\n        }\n      }, h('br'), h('br'), h('br'), h('br'), h(LargeNumber, {\n        number: this.state.number\n      }), h('br'), h(SomeText, {\n        text: this.props.itemData.text\n      }), h('br'), h(SmallNumber, {\n        number: this.state.label\n      }));\n    }\n  }]);\n\n  return SampleCardNumber;\n}(Component);\n\nvar SampleBackground = /*#__PURE__*/function (_Component2) {\n  _inherits(SampleBackground, _Component2);\n\n  var _super2 = _createSuper(SampleBackground);\n\n  function SampleBackground(props) {\n    var _this3;\n\n    _classCallCheck(this, SampleBackground);\n\n    _this3 = _super2.call(this, props);\n    _this3.state = {\n      top_label: '??',\n      log: []\n    };\n    _this3.on_card = _this3.on_card.bind(_assertThisInitialized(_this3));\n    _this3.on_dragstate = _this3.on_dragstate.bind(_assertThisInitialized(_this3));\n    return _this3;\n  }\n\n  _createClass(SampleBackground, [{\n    key: \"on_card\",\n    value: function on_card(bitmask, number, item, all) {\n      var msg = \"card \".concat(number, \" complete \").concat(item.text, \" remaining: \").concat(all.length - number - 1);\n      this.setState({\n        log: [].concat(msg, this.state.log).slice(0, 4)\n      });\n    }\n  }, {\n    key: \"on_dragstate\",\n    value: function on_dragstate(bitmask) {\n      this.setState({\n        top_label: bitmask_as_text(bitmask)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var self = this;\n\n      function Button(N) {\n        return h('button', {\n          onClick: function onClick(x) {\n            self.setState({\n              log: []\n            });\n            self.props.userData.reset(N);\n          }\n        }, N);\n      }\n\n      function NoMore() {\n        return h('div', {\n          style: {\n            position: 'absolute',\n            color: 'red',\n            fontSize: '7mm',\n            textShadow: '0px 0px 2px white',\n            left: SwiperConfig.left,\n            top: SwiperConfig.top + 100,\n            width: SwiperConfig.width,\n            height: SwiperConfig.height\n          }\n        }, h('div', {}, 'Stack is empty'), h('div', {\n          style: {\n            fontSize: '11pt'\n          }\n        }, 'click to fill it with'), h('br'), Button(1), Button(2), Button(3), Button(5), Button(10), Button(20));\n      }\n\n      return h('div', {\n        style: DeskStyle,\n        onClick: function onClick() {\n          console.log(111);\n        }\n      }, h(NoMore), h('pre', {\n        style: {\n          color: 'purple',\n          left: SwiperConfig.left,\n          top: SwiperConfig.height + SwiperConfig.top + SwiperConfig.stackMax * 2,\n          position: 'absolute'\n        }\n      }, this.state.log.join('\\n')));\n    }\n  }]);\n\n  return SampleBackground;\n}(Component);\n\nvar Cards = /*#__PURE__*/function (_Component3) {\n  _inherits(Cards, _Component3);\n\n  var _super3 = _createSuper(Cards);\n\n  function Cards(props) {\n    var _this4;\n\n    _classCallCheck(this, Cards);\n\n    _this4 = _super3.call(this, props);\n    _this4.state = {\n      source: []\n    };\n    _this4.reset = _this4.reset.bind(_assertThisInitialized(_this4));\n\n    _this4.reset(4);\n\n    return _this4;\n  }\n\n  _createClass(Cards, [{\n    key: \"reset\",\n    value: function reset(size) {\n      var data = 'one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nighteen twenty'.split(' ').map(function (x) {\n        return {\n          text: x\n        };\n      });\n      this.setState({\n        source: data.slice(0, size)\n      });\n\n      if (this.swiper) {\n        this.swiper.setState({\n          current: 0\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return h('div', {}, h(PitchSwiper, {\n        Card: SampleCardNumber,\n        Background: SampleBackground,\n        data: this.state.source,\n        userData: {\n          reset: this.reset\n        },\n        ref: function ref(x) {\n          _this5.swiper = x;\n        }\n      }));\n    }\n  }]);\n\n  return Cards;\n}(Component);\n\nexport default Cards;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"LargeNumber\");\n$RefreshReg$(_c2, \"SmallNumber\");\n$RefreshReg$(_c3, \"SomeText\");","map":{"version":3,"sources":["/home/denis/nextPWA/swip/pages/cards/cards.js"],"names":["React","Component","h","createElement","SwiperConfig","PitchSwiper","DrawStacks","DeskStyle","zIndex","position","textAlign","top","left","width","height","backgroundImage","LargeNumber","props","style","fontSize","color","number","SmallNumber","SomeText","text","bitmask_as_text","x","s","SampleCardNumber","on_dragstate","bind","callApi","state","setState","label","setTimeout","new_dragout","dragout","itemData","SampleBackground","top_label","log","on_card","bitmask","item","all","msg","length","concat","slice","self","Button","N","onClick","userData","reset","NoMore","textShadow","console","stackMax","join","Cards","source","size","data","split","map","swiper","current","Card","Background","ref"],"mappings":"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","sourcesContent":["// var { render, h, Component } = window.preact\n\nimport React, { Component } from 'react'\nconst h = React.createElement\n\nimport { SwiperConfig, PitchSwiper, DrawStacks } from '../../components/swipper'\n\nvar DeskStyle = {\n  zIndex: 1001,\n  position: 'fixed',\n  textAlign: 'center',\n  top: 0,\n  left: 0,\n  width: SwiperConfig.width * 2,\n  height: SwiperConfig.height * 1.5,\n  backgroundImage:\n    'url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABZJREFUeNpi2r9//38gYGAEESAAEGAAasgJOgzOKCoAAAAASUVORK5CYII=)',\n}\n\nfunction LargeNumber(props) {\n  return h(\n    'span',\n    {\n      style: {\n        fontSize: '1cm',\n        color: 'blue',\n      },\n    },\n    props.number\n  )\n}\n\nfunction SmallNumber(props) {\n  return h(\n    'span',\n    {\n      style: {\n        fontSize: '0.5cm',\n        color: 'brown',\n      },\n    },\n    props.number\n  )\n}\n\nfunction SomeText(props) {\n  return h(\n    'span',\n    {\n      style: {\n        fontSize: '0.7cm',\n        color: 'green',\n      },\n    },\n    props.text\n  )\n}\n\nfunction bitmask_as_text(x) {\n  if (x == 0) return 'keep dragging'\n  var s = ''\n  if (x & 1) s += 'left '\n  if (x & 2) s += 'right '\n  if (x & 4) s += 'up '\n  if (x & 8) s += 'down '\n  return s\n}\n\nclass SampleCardNumber extends Component {\n  constructor(props) {\n    super(props)\n    this.on_dragstate = this.on_dragstate.bind(this)\n    this.callApi = this.callApi.bind(this)\n    this.state = {}\n  }\n\n  callApi() {\n    this.setState({\n      number: '?',\n      label: 'loading',\n    })\n    setTimeout((x) => {\n      this.setState({\n        number: '<' + this.props.number + '>',\n        label: 'still',\n      })\n    }, 500)\n  }\n\n  componentDidMount() {\n    this.callApi()\n  }\n\n  on_dragstate(new_dragout) {\n    this.setState({\n      label: bitmask_as_text(new_dragout),\n    })\n  }\n\n  on_dragbegin() {}\n\n  on_dragend(dragout) {}\n\n  render() {\n    return h(\n      'div',\n      { style: { textAlign: 'center' } },\n      h('br'),\n      h('br'),\n      h('br'),\n      h('br'),\n      h(LargeNumber, { number: this.state.number }),\n      h('br'),\n      h(SomeText, { text: this.props.itemData.text }),\n      h('br'),\n      h(SmallNumber, { number: this.state.label })\n    )\n  }\n}\n\nclass SampleBackground extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      top_label: '??',\n      log: [],\n    }\n    this.on_card = this.on_card.bind(this)\n    this.on_dragstate = this.on_dragstate.bind(this)\n  }\n\n  on_card(bitmask, number, item, all) {\n    var msg = `card ${number} complete ${item.text} remaining: ${\n      all.length - number - 1\n    }`\n    this.setState({\n      log: [].concat(msg, this.state.log).slice(0, 4),\n    })\n  }\n\n  on_dragstate(bitmask) {\n    this.setState({ top_label: bitmask_as_text(bitmask) })\n  }\n\n  render() {\n    var self = this\n\n    function Button(N) {\n      return h(\n        'button',\n        {\n          onClick: (x) => {\n            self.setState({ log: [] })\n            self.props.userData.reset(N)\n          },\n        },\n        N\n      )\n    }\n\n    function NoMore() {\n      return h(\n        'div',\n        {\n          style: {\n            position: 'absolute',\n            color: 'red',\n            fontSize: '7mm',\n            textShadow: '0px 0px 2px white',\n            left: SwiperConfig.left,\n            top: SwiperConfig.top + 100,\n            width: SwiperConfig.width,\n            height: SwiperConfig.height,\n          },\n        },\n        h('div', {}, 'Stack is empty'),\n        h('div', { style: { fontSize: '11pt' } }, 'click to fill it with'),\n        h('br'),\n        Button(1),\n        Button(2),\n        Button(3),\n        Button(5),\n        Button(10),\n        Button(20)\n      )\n    }\n    return h(\n      'div',\n      {\n        style: DeskStyle,\n        onClick: () => {\n          console.log(111)\n        },\n      },\n      h(NoMore),\n      h(\n        'pre',\n        {\n          style: {\n            color: 'purple',\n            left: SwiperConfig.left,\n            top:\n              SwiperConfig.height +\n              SwiperConfig.top +\n              SwiperConfig.stackMax * 2,\n            position: 'absolute',\n          },\n        },\n        this.state.log.join('\\n')\n      )\n    )\n  }\n}\n\nclass Cards extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      source: [],\n    }\n    this.reset = this.reset.bind(this)\n    this.reset(4)\n  }\n\n  reset(size) {\n    var data = 'one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nighteen twenty'\n      .split(' ')\n      .map((x) => {\n        return { text: x }\n      })\n    this.setState({ source: data.slice(0, size) })\n    if (this.swiper) {\n      this.swiper.setState({ current: 0 })\n    }\n  }\n\n  render() {\n    return h(\n      'div',\n      {},\n      h(PitchSwiper, {\n        Card: SampleCardNumber,\n        Background: SampleBackground,\n        data: this.state.source,\n        userData: { reset: this.reset },\n        ref: (x) => {\n          this.swiper = x\n        },\n      })\n    )\n  }\n}\n\nexport default Cards\n"]},"metadata":{},"sourceType":"module"}